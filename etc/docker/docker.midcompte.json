{
  "name": "midcompte",
  "image": "docker.maceroc.com/millegrilles_midcompte_python:2022.3.0",
  "certificat": {"roles": ["midcompte"], "dns": {"localhost": true, "hostnames": ["midcompte"], "domain": true}},
  "constraints": ["node.labels.millegrilles.midcompte == true"],
  "configs": [
    {
      "name": "pki.millegrille",
      "filename": "/run/secrets/pki.millegrille"
    },
    {
      "name": "pki.midcompte",
      "current": "cert",
      "filename": "/run/secrets/pki.midcompte.cert"
    }
  ],
  "secrets": [
    {
      "name": "pki.midcompte",
      "current": "key",
      "filename": "pki.midcompte.key"
    }
  ],
  "endpoint_spec": {
    "mode": "vip",
    "ports": [
      {
        "published_port": 2444,
        "target_port": 2444,
        "protocol": "tcp"
      }
    ]
  },
  "networks": [{
    "target": "millegrille_net",
    "aliases": ["midcompte"]
  }],
  "labels": {
    "millegrille": "${IDMG}"
  },
  "resources": {
    "cpu_limit": 500000000,
    "mem_limit": 100000000
  },
  "mode": {
    "mode": "replicated",
    "replicas": 1
  }
}
