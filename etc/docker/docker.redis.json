{
  "name": "redis",
  "image": "docker.maceroc.com/mg_redis:6.2_0",
  "certificat": {"roles": ["redis"], "dns": {"localhost": true, "hostnames": ["redis"], "domain": true}},
  "passwords": ["redis"],
  "mounts": [{"source": "mg-redis", "target":  "/data", "type": "volume"}],
  "configs": [
    {
      "name": "pki.redis",
      "current": "cert",
      "filename": "/run/secrets/cert.pem"
    },
    {"name": "pki.millegrille", "filename": "/run/secrets/millegrille.cert.pem"}
  ],
  "secrets": [
    {
      "name": "pki.redis",
      "current": "key",
      "filename": "key.pem"
    },
    {
      "name": "passwd.redis",
      "current": "password",
      "filename": "passwd.redis.txt"
    }
  ],
  "constraints": ["node.labels.millegrilles.redis == true"],
  "networks": [{"target": "millegrille_net", "aliases": ["redis"]}],
  "labels": {"millegrille": "${IDMG}"},
  "resources": {
    "cpu_limit": 750000000,
    "mem_limit": 100000000
  },
  "mode": {
    "mode": "replicated",
    "replicas": 1
  }
}
